fix the instance overlapping problem
setup unit test
